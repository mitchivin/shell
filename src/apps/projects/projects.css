/*
 * projects.css â€” Styles for Projects App in Windows XP Simulation
 * Styles the My Projects window, feed, lightbox, and responsive layout.
 * @file projects.css
 */

/* ===== Base Layout & Background ===== */
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: #333;
    width: 100%;
}

html {
    background: url('../../../assets/apps/projects/projectsbg.webp') center center / cover no-repeat fixed;
}

body {
    background: none !important;
    background-size: 200% 200%;  
    height: 100%;
    width: 100%;
    animation: background 6s ease infinite;
    min-height: 100vh;
    margin: 0;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    background-attachment: fixed;
}

@keyframes background { 
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.scroll-content {
    height: 100%; /* Make scroll-content fill the body */
    overflow-y: auto; /* Enable scrolling and allow XP.css to style the scrollbar */
    position: relative; /* Optional: for positioning context if needed by xp.css sub-elements */
}

.feed-container {
    position: relative; /* Added for absolute positioning of posts */
    padding: 10px;
    box-sizing: border-box;
    margin-left: auto;
    margin-right: auto;
}

/* Tablet and Small Desktop: 3 columns (Changed from 2) */
@media (min-width: 768px) {
    .feed-container {
        padding: 40px;
        max-width: 1072px;
    }

    .post {
        max-width: 320px;
    }
}

/* Large Desktop: 4 columns (Changed from 3) */
@media (min-width: 1200px) {
    .feed-container {
        max-width: 1408px;
    }
}

.post {
    border-radius: 8px;
    margin: 0 0 12px 0; /* Keep bottom margin for spacing */
    width: 100%; /* JS will set specific width for items in columns */
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.692);
    overflow: hidden;
    cursor: pointer;
    position: relative;
}

.post:last-child {
    margin-bottom: 0;
    background-color: #2ecc71; /* Green for videos */
}

.post.image-post img {
    display: block; /* Remove potential bottom space */
    width: 100%;   /* Fill container width */
    height: auto;  /* Maintain aspect ratio */
}

.post.video-post video {
    display: block;
    width: 100%;
    aspect-ratio: 9/16;
    object-fit: contain;
    box-sizing: border-box;
    background-color: #000;
}

.placeholder-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    text-align: center;
    padding: 10px;
    box-sizing: border-box;
}

.image-placeholder {
    width: 100%;
    aspect-ratio: 1080 / 1350;
    background-color: #3498db; /* Blue for images */
}

.video-placeholder {
    width: 100%;
    aspect-ratio: 1080 / 1920;
    background-color: #2ecc71; /* Green for videos */
}

.post-caption {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
    display: flex;
    align-items: flex-end;
    padding: 18px 16px 14px 16px;
    color: #fff;
    font-size: 1.08rem;
    font-weight: 500;
    line-height: 1.4;
    background: linear-gradient(0deg, rgba(20,20,20,0.92) 70%, rgba(20,20,20,0.0) 100%);
    opacity: 0;
    pointer-events: none;
    transform: translateY(100%);
    transition: opacity 0.28s cubic-bezier(0.4,0,0.2,1), transform 0.32s cubic-bezier(0.4,0,0.2,1);
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
}

.post.show-caption .post-caption {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
}

/* Lightbox Styles */
#project-lightbox {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s cubic-bezier(0.4,0,0.2,1);
    display: none; /* display is toggled by JS */
    justify-content: center; 
    align-items: center; 
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100dvh; 
    background-color: rgba(30, 30, 30, 0.863) !important;
    z-index: 100010; 
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
}

#project-lightbox.fade-in {
    opacity: 1;
    pointer-events: auto;
}

#project-lightbox.fade-out {
    opacity: 0;
    pointer-events: none;
}

#lightbox-inner-wrapper {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 1440px;
    height: 100%;
    box-sizing: border-box;
    overflow: visible !important;
}

#lightbox-content {
    position: relative;
    display: flex;
    align-items: flex-end;
    justify-content: center;
}

#lightbox-content img,
#lightbox-content video {
    display: block;
    width: 100%;
    aspect-ratio: 9/16;
    object-fit: contain;
    background-color: #000;
    position: relative;
    z-index: 1;
    margin: 0;
    padding: 0;
    border-radius: 20px;
    max-height: calc(100vh - 160px);
}

#project-lightbox.fade-in #lightbox-content img,
#project-lightbox.fade-in #lightbox-content video {
    opacity: 1;
}

#project-lightbox.fade-out #lightbox-content img,
#project-lightbox.fade-out #lightbox-content video {
    opacity: 0;
}

#lightbox-details {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 90vw;
    text-align: center;
    background-color: #333;
    border-radius: 20px;
    flex-grow: 1;
    min-height: 0;
}

/* General Lightbox Text Styles (primarily for Desktop) */
#lightbox-title {
    color: #f1f1f1;
    font-size: 1.9rem;
    font-weight: 700;
    line-height: 1.2;
    margin-top: 10px; /* Base margin, can be overridden by desktop */
}

#lightbox-subheading {
    color: #cccccc; 
    font-size: 1.2rem; 
    font-weight: 600; 
    line-height: 1.4;
    margin-top: 4px; /* Base margin */
}

#lightbox-description {
    color: #f1f1f1;
    font-size: 0.9rem;
    line-height: 1.5;
    margin-top: 10px; 
    margin-bottom: 15px; 
}

/* Mobile Layout (becomes Base Layout) */
#project-lightbox {
  height: 100vh; 
  min-height: 100vh;
  align-items: center;
  justify-content: center;
  padding: 0; 
  margin: 0;
  overflow: hidden;
}
#project-lightbox #lightbox-inner-wrapper { 
  height: 100vh;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0;
}
#project-lightbox #lightbox-content { 
  height: 100vh;
  min-height: 100vh;
  max-height: 100vh;
  width: 100vw;
  max-width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0;
}

#project-lightbox #lightbox-title, 
#project-lightbox #lightbox-subheading, 
#project-lightbox #lightbox-description { 
    display: none;
}

#project-lightbox #lightbox-details { 
    justify-content: center;
    background-color: transparent;
    padding: 0;
    flex-grow: 0; 
}

#project-lightbox #lightbox-content img, 
#project-lightbox #lightbox-content video { 
  max-width: calc(100vw - 24px);
  max-height: calc(100vh - 24px);
  width: auto;
  height: auto;
  object-fit: contain;
  display: block;
  padding: 0;
  border: none;
}

/* Ensure .video-post is positioned for overlay */
.video-post {
  position: relative;
}

@media (min-width: 768px) { 
    #lightbox-content {
      align-items: center; 
    }
    .lightbox-media-wrapper {
      display: flex !important; 
      flex-direction: row; 
      align-items: stretch; 
      justify-content: center; 
      position: relative; 
      min-height: 320px; 
      height: 90vh; 
      width: 90vw; /* Always 90% of viewport width */
      max-width: 100%; /* Ensures it doesn't exceed its parent's width constraints */
      margin-left: auto; /* To center the 90vw block */
      margin-right: auto; /* To center the 90vw block */
    }
    .lightbox-desc-card {
      background: #ecececb6 !important;
      color: #222 !important;
      width: 95% !important; /* Changed from 90% */
    }

    /* Styling for title, subheading, body within the description card */
    .lightbox-media-wrapper .lightbox-desc-card .card-title {
        font-size: 1.8rem; /* Slightly larger for title */
        font-weight: 800; /* Bolder title */
        color: inherit; /* Inherit from .lightbox-desc-card which is #222 !important */
        margin-bottom: 4px; /* Reduced space to subheading */
        line-height: 1.2;
        text-transform: uppercase; /* Capitalize the heading */
    }

    .lightbox-media-wrapper .lightbox-desc-card .card-subheading {
        font-size: 1.1rem;
        font-weight: 600;
        color: #555; /* More subtle, darker gray */
        margin-bottom: 12px;
        line-height: 1.3;
        opacity: 0.85; /* Slightly less prominent */
    }

    .lightbox-media-wrapper .lightbox-desc-card .card-body {
        font-size: 0.9rem; /* Slightly smaller body text */
        font-weight: 400;
        color: inherit;
        line-height: 1.6;
    }

    /* Software Icons Styling */
    .lightbox-media-wrapper .lightbox-desc-card .card-software-section {
        display: flex;
        flex-wrap: wrap; /* Allow section to wrap if needed, though unlikely here */
        justify-content: space-between; /* Label left, icons right */
        align-items: center;
        margin-top: auto; /* Push to the bottom of the card */
        padding-top: 16px; /* Reduced top padding */
        border-top: 1px solid rgba(0, 0, 0, 0.1); /* Subtle separator line */
    }

    .lightbox-media-wrapper .lightbox-desc-card .software-section-label {
        font-size: 1rem; /* Match main subheading */
        font-weight: 600;
        color: #555; /* Match main subheading */
        margin-right: 16px; /* Space between label and icon group */
        opacity: 0.85; /* Match main subheading */
    }

    .lightbox-media-wrapper .lightbox-desc-card .software-icons-list {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 24px; /* Space between individual icons */
    }

    .lightbox-media-wrapper .lightbox-desc-card .software-icon {
        width: 30px !important; /* Icons smaller by 2px */
        height: 30px !important; /* Icons smaller by 2px */
        margin-bottom: 6px; /* Reduced bottom margin for wrapped icons */
        object-fit: contain;
        border: none !important; /* Force remove any borders */
        border-radius: 0 !important; /* Ensure icons are square */
    }

    /* Software Tooltip Styling */
    .lightbox-desc-card .software-tooltip {
        position: absolute;
        background-color: transparent; /* Removed background */
        color: #222; /* Text color to match card body text */
        padding: 0; /* Removed padding */
        border-radius: 0; /* Removed border-radius */
        font-size: 0.85rem; /* Adjusted for potentially better readability without bg */
        font-weight: 600; /* Adjusted for potentially better readability */
        z-index: 10;
        opacity: 0;
        visibility: hidden;
        transform: translateY(5px); /* Start slightly lower */
        transition: opacity 0.2s ease-out, visibility 0.2s ease-out, transform 0.2s ease-out;
        pointer-events: none; /* Tooltip itself should not capture mouse events */
        white-space: nowrap; /* Prevent name from wrapping */
        text-shadow: 0px 0px 1px rgba(255, 255, 255, 0.6); /* Subtle shadow for readability */
    }

    .lightbox-desc-card .software-tooltip.visible {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    body.projects-window-maximized .lightbox-media-wrapper.video-media-active .lightbox-desc-card {
        padding-right: 64px; /* Apply extra right padding for videos only when maximized */
    }

    .lightbox-desc-card .lightbox-close-btn {
        position: absolute;
        top: 12px;
        right: 12px;
        z-index: 10;
        width: 28px;
        height: 28px;
        background: #e2e2e2 linear-gradient(to bottom, #fff 0%, #e2e2e2 100%);
        border: 1px solid #aaa;
        border-radius: 50%;
        font-size: 1.4rem;
        color: #333;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.15s, box-shadow 0.15s;
    }
    .lightbox-desc-card .lightbox-close-btn:hover {
        background: #f8d7da linear-gradient(to bottom, #fff 0%, #f8d7da 100%);
        color: #a00;
        box-shadow: 0 4px 16px rgba(160,0,0,0.18);
    }
}

/* Hide navigation buttons and hint on mobile */
@media (max-width: 767px) {
  .lightbox-media-wrapper {
    position: relative;
    overflow: hidden;
    border-radius: 20px; /* Ensure the clipping container is also rounded */
  }
  .lightbox-description-overlay, .lightbox-title-overlay { /* Apply common mobile overlay animation base */
    position: absolute;
    left: 0;
    right: 0;
    z-index: 10;
    transition: none !important;
    opacity: 0;
    pointer-events: none;
    animation: none;
  }
  .lightbox-description-overlay.show, .lightbox-title-overlay.show {
    opacity: 1;
    pointer-events: auto;
  }
  .lightbox-description-overlay.hide-anim, .lightbox-title-overlay.hide-anim {
    opacity: 0;
    pointer-events: none;
  }

  /* Specific for bottom description overlay */
  .lightbox-description-overlay {
    bottom: 0;
    transform: translateY(16px);
  }
  .lightbox-description-overlay.show {
    transform: translateY(0);
    animation: mobileBottomOverlaySlideIn 400ms cubic-bezier(0.4,0,0.2,1) forwards;
  }
  .lightbox-description-overlay.hide-anim {
    transform: translateY(16px);
    animation: mobileBottomOverlaySlideOut 250ms cubic-bezier(0.4,0,0.2,1) forwards; /* Duration 250ms */
  }

  /* Specific for top title overlay */
  .lightbox-title-overlay {
    top: 0;
    transform: translateY(-24px); /* Start hidden above with a fixed offset */
    display: flex; /* Ensure it is a flex container for alignment */
    align-items: center; /* Vertically center text */
    justify-content: space-between; /* Title left, icon right */
    padding: 24px 24px 36px 24px; /* Bottom padding set to 36px */
    background: linear-gradient(180deg, rgba(20,20,20,0.95) 0%, rgba(20,20,20,0.90) 20%, rgba(20,20,20,0.78) 40%, rgba(20,20,20,0.60) 60%, rgba(20,20,20,0.35) 80%, rgba(20,20,20,0.0) 100%); /* Mirrored bottom overlay's smooth gradient */
    border-top-left-radius: 20px; /* Match media radius */
    border-top-right-radius: 20px; /* Match media radius */
    /* Text styling to match bottom overlay */
    color: #fff;
    font-size: 1.5rem; 
    font-weight: 700;
    line-height: 1.3; /* Explicitly add for consistency */
    text-transform: uppercase; /* Capitalize the title */
  }

  .lightbox-overlay-title-text { /* New class for the title span */
      flex-grow: 1; /* Allow title to take available space */
      margin-right: 10px; /* Space between title and icon */
      text-align: left; /* Ensure title text is left-aligned */
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap; /* Keep title on one line, ellipsis if too long */
  }

  .mobile-title-link-icon {
    display: inline-flex; 
    align-items: center;
    justify-content: center;
    flex-shrink: 0; /* Prevent icon from shrinking */
  }

  .mobile-title-link-icon img {
    width: 34px !important;  /* Increased by 2px */
    height: 34px !important; /* Increased by 2px */
    display: block;
    object-fit: contain; /* Added for better scaling */
    border-radius: 0 !important; /* Ensure icons are square */
  }

  .lightbox-title-overlay.show {
    transform: translateY(0);
    animation: mobileTopOverlaySlideIn 400ms cubic-bezier(0.4,0,0.2,1) forwards;
  }
  .lightbox-title-overlay.hide-anim {
    transform: translateY(-24px); /* Match initial hidden state */
    animation: mobileTopOverlaySlideOut 250ms cubic-bezier(0.4,0,0.2,1) forwards; /* Duration 250ms */
  }
}

.lightbox-description-overlay { /* Renamed from lightbox-caption-overlay */
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 2;
  display: flex;
  align-items: flex-end;
  padding: 60px 24px 24px 24px;
  color: #fff;
  font-size: 0.95rem;
  font-weight: 500;
  line-height: 1.3;
  background: linear-gradient(0deg, rgba(20,20,20,0.95) 0%, rgba(20,20,20,0.90) 20%, rgba(20,20,20,0.78) 40%, rgba(20,20,20,0.60) 60%, rgba(20,20,20,0.35) 80%, rgba(20,20,20,0.0) 100%); /* Smoother gradient with more stops */
  opacity: 0;
  pointer-events: none;
  transform: translateY(100%);
  transition: none !important;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
  max-width: 100%;
  box-sizing: border-box;
}
.lightbox-description-overlay.show { /* Renamed */
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
  transition: none !important;
}

.lightbox-media-wrapper img,
.lightbox-media-wrapper video {
  max-height: 100%; /* Max height of its allocated space in the flex container */
  min-width: 0; /* Necessary for flex items */
  min-height: 0; /* Necessary for flex items */
  flex: 0 0 auto; /* CHANGED: No grow, NO SHRINK, basis is auto */
  box-shadow: 0 2px 16px rgba(0,0,0,0.18);
  margin-right: 0; /* Was already 0, ensure it stays for spacing if desc card is next */
  display: block; 
  object-fit: contain; /* Crucial for aspect ratio */
  z-index: 2;
}

.lightbox-media-wrapper .lightbox-desc-card {
  margin-left: auto; 
  margin-right: 0; 
  height: 100%; 
  border-radius: 18px;
  background: linear-gradient(120deg, rgba(30,30,30,0.98) 80%, rgba(30,30,30,0.92) 100%);
  box-shadow: 0 4px 32px rgba(0,0,0,0.18);
  display: flex; 
  flex-direction: column;
  font-size: 1.13rem;
  font-weight: 500;
  color: #fff; /* Default color */
  z-index: 1;
  box-sizing: border-box;
  opacity: 0; 
  transform: translateX(-40px); 
  transition: opacity 0.3s, transform 0.3s; /* Keep existing animation for appearing */
  overflow: auto; /* For scrolling text content */
  padding: 24px 24px 18px 24px; /* Adjusted to remove bottom padding */
  text-align: left; /* Ensure text is left-aligned */
  white-space: normal; /* Ensure text wraps */
  word-break: break-word; /* Ensure long words break */
  flex-shrink: 1; /* Default, good */
}

/* Renamed mobileDescOverlaySlideIn to mobileBottomOverlaySlideIn */
@keyframes mobileBottomOverlaySlideIn {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Renamed mobileDescOverlaySlideOut to mobileBottomOverlaySlideOut */
@keyframes mobileBottomOverlaySlideOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(16px);
  }
}

/* New animations for top title overlay */
@keyframes mobileTopOverlaySlideIn {
  from {
    opacity: 0;
    transform: translateY(-24px); /* Match initial state */
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes mobileTopOverlaySlideOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-24px); /* Match initial hidden state */
  }
}

.desc-card-anim-wrapper {
  min-width: 0;
  max-width: 600px;
  overflow: hidden;
  display: flex;
  flex: 1 1 auto;
  margin-left: 15px;
}

.lightbox-media-wrapper.video-media-active .desc-card-anim-wrapper {
  max-width: 450px;
}

body.projects-window-maximized .lightbox-media-wrapper.video-media-active .desc-card-anim-wrapper {
  max-width: 545px;
}

.lightbox-media-wrapper.desc-visible .desc-card-anim-wrapper {
  opacity: 1;
  transform: translateX(0);
}

.lightbox-media-wrapper.desc-visible .lightbox-desc-card {
  opacity: 1;
  transform: translateX(0);
}

body, .scroll-content, .feed-container, .post, .main-window-content {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Allow selection in links (if needed) */
.post a, a {
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}